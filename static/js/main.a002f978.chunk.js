(this.webpackJsonpbike_rental_client=this.webpackJsonpbike_rental_client||[]).push([[0],{24:function(e,t,n){},25:function(e,t,n){},26:function(e,t,n){},33:function(e,t,n){},54:function(e,t,n){},56:function(e,t,n){},57:function(e,t,n){},58:function(e,t,n){},61:function(e,t,n){},62:function(e,t,n){"use strict";n.r(t);var r=n(1),c=n.n(r),a=n(7),i=n.n(a),s=(n(32),n(33),n(2)),o=n.n(s),u=n(4),l=n(5),b=n(13),j=(n(35),n(8)),d=n.n(j);d.a.defaults.baseURL="https://bicycles-rent.herokuapp.com/";var p=function(){var e=Object(u.a)(o.a.mark((function e(){var t,n;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.prev=0,e.next=3,d.a.get("/bikes");case 3:return t=e.sent,n=t.data,e.abrupt("return",n);case 8:e.prev=8,e.t0=e.catch(0),console.error(e.t0);case 11:case"end":return e.stop()}}),e,null,[[0,8]])})));return function(){return e.apply(this,arguments)}}(),f=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.post("/bikes",t);case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),h=function(){var e=Object(u.a)(o.a.mark((function e(t){var n,r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.delete("/bikes/".concat(t));case 2:return n=e.sent,r=n.data,e.abrupt("return",r);case 5:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),m=function(){var e=Object(u.a)(o.a.mark((function e(t,n){var r,c;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,d.a.patch("bikes/".concat(t),n);case 2:return r=e.sent,c=r.data,e.abrupt("return",c);case 5:case"end":return e.stop()}}),e)})));return function(t,n){return e.apply(this,arguments)}}(),O=(n(54),n(0));function v(e){var t=e.children;return Object(O.jsx)("div",{className:"Container",children:t})}var x=n(6),k=n.n(x),y=(n(56),n(24),n(15)),N=n(27),w=["children","onClick","styles"];function g(e){var t=e.children,n=e.onClick,r=(e.styles,Object(N.a)(e,w));return Object(O.jsx)("button",Object(y.a)(Object(y.a)({type:"button",className:"button",onClick:n},r),{},{children:t}))}function C(e){var t=e.onSubmit,n=Object(r.useState)(""),c=Object(l.a)(n,2),a=c[0],i=c[1],s=Object(r.useState)("Road"),b=Object(l.a)(s,2),j=b[0],d=b[1],p=Object(r.useState)(1),f=Object(l.a)(p,2),h=f[0],m=f[1],v=function(){var e=Object(u.a)(o.a.mark((function e(n){var r;return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return n.preventDefault(),r={bikeName:a,bikeType:j,rentPrice:h},e.next=4,t(r);case 4:i(""),m(1);case 6:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsx)(O.Fragment,{children:Object(O.jsxs)("div",{className:"form-wrapper",children:[Object(O.jsx)("h2",{className:"form-rental-title",children:"Create new rent"}),Object(O.jsxs)("form",{className:"form-rental",onSubmit:v,children:[Object(O.jsxs)("label",{className:"form-label-name",children:["Bike name",Object(O.jsx)("input",{className:"input-name",id:"bike-name-id",type:"text",value:a,onChange:function(e){return i(e.target.value)}})]}),Object(O.jsxs)("label",{className:"form-label-type",children:["Bike type",Object(O.jsxs)("select",{className:"select-type",id:"bike-type-id",name:"bike-type",onChange:function(e){return d(e.target.value)},children:[Object(O.jsx)("option",{value:"Road",children:"Road"}),Object(O.jsx)("option",{value:"Mountain",children:"Mountain"}),Object(O.jsx)("option",{value:"BMX",children:"BMX"}),Object(O.jsx)("option",{value:"Touring",children:"Touring"}),Object(O.jsx)("option",{value:"Folding",children:"Folding"}),Object(O.jsx)("option",{value:"Cruiser",children:"Cruiser"})]})]}),Object(O.jsxs)("label",{className:"form-label-price",children:["Rent Price",Object(O.jsx)("input",{className:"input-price",id:"bike-price-id",type:"number",min:"1",value:h,onChange:function(e){return m(e.target.value)}})]}),Object(O.jsx)(g,{type:"submit",className:k()("button","button-submit"),children:"Submit rent"})]})]})})}var R=n.p+"static/media/logo.867e0c73.png",S=(n(57),n(64));function M(){var e=Object(S.a)("(min-width: 768px)");return Object(O.jsxs)("header",{className:"header",children:[e&&Object(O.jsx)("img",{className:"icon-logo",src:R,height:"70",width:"70",alt:"Icon logo"}),Object(O.jsx)("h1",{className:"header-title",children:"bicycle rental service"})]})}n(58);function U(){return Object(O.jsx)("div",{className:"banner"})}n(25),n(59);var E=n(11),T=n.n(E),_=n(14),B=n.n(_),F=(n(61),document.getElementById("modal"));function P(e){var t=e.children,n=e.toggleModal;return Object(r.useEffect)((function(){var e=function e(t){"Escape"===t.code&&n(),window.addEventListener("keydown",e)};return function(){window.removeEventListener("keydown",e)}}),[n]),Object(a.createPortal)(Object(O.jsx)("div",{className:"modal-backdrop",onClick:function(e){e.target===e.currentTarget&&n()},children:Object(O.jsx)("div",{className:"modal-content",children:t})}),F)}function A(e){var t=e.id,n=e.name,c=e.type,a=e.price,i=e.onUpdate,s=e.updatedAt,o=Object(r.useState)(!1),u=Object(l.a)(o,2),b=u[0],j=u[1],d=Object(r.useState)(null),p=Object(l.a)(d,2),f=p[0],h=p[1],m=Object(r.useRef)(null),v=function(){j((function(e){return!e}))};Object(r.useEffect)((function(){h(new Date)}),[b,m]);var x=T()(s),y=T()(f).diff(x),N=(a/60*(60*Math.floor(y%864e5/36e5)+Math.floor(y%36e5/6e4))).toFixed(2);return Object(O.jsxs)("li",{className:"rental-list-item",children:[Object(O.jsxs)("p",{className:"rental-bike-data",children:[n," / ",c," / $",a]}),Object(O.jsxs)(O.Fragment,{children:[Object(O.jsx)("span",{children:"Start rent: "}),Object(O.jsx)(B.a,{format:"HH:mm",children:s})]}),Object(O.jsx)(g,{className:k()("button button-cancel-rent"),onClick:function(){v()},children:"Count price"}),b&&Object(O.jsxs)(P,{toggleModal:v,children:[Object(O.jsx)("button",{onClick:function(){return i(t)},type:"button",children:"Stop Rent"}),Object(O.jsx)("button",{type:"button",onClick:v,children:"Continue Rent"}),Object(O.jsx)("span",{children:"Time passed:"}),Object(O.jsx)(B.a,{element:"span",format:"HH:mm:ss",durationFromNow:!0,interval:"1000",children:s}),Object(O.jsx)("br",{}),Object(O.jsxs)("span",{children:["Total price: $",N]})]})]})}function H(e){var t=e.bikes,n=e.onUpdate,r=t.filter((function(e){return e.isRented}));return Object(O.jsxs)("section",{className:"rental-section",children:[Object(O.jsxs)("h2",{className:"rental-section-title",children:["Your rent(",r.length,")"]}),Object(O.jsx)("ul",{className:"rental-list",children:0===r.length?Object(O.jsx)("p",{children:"No rented bicycles"}):r.map((function(e){var t=e._id,r=e.bikeName,c=e.bikeType,a=e.rentPrice,i=e.updatedAt;return Object(O.jsx)(A,{id:t,name:r,type:c,price:a,onUpdate:n,updatedAt:i},t)}))})]})}n(26);function D(e){var t=e.id,n=e.name,r=e.type,c=e.price,a=e.onRemove,i=e.onUpdate;return Object(O.jsxs)("li",{className:"available-list-item",children:[Object(O.jsxs)("p",{className:"available-bike-data",children:[n," / ",r," / $",c]}),Object(O.jsxs)("div",{className:"available-buttons-wrapper",children:[Object(O.jsx)(g,{onClick:function(){return i(t)},className:k()("button button-rent"),children:"Rent"}),Object(O.jsx)(g,{onClick:function(){return a(t)},className:k()("button button-delete"),children:"Delete"})]})]})}function I(e){var t=e.bikes,n=e.onRemove,r=e.onUpdate,c=null===t||void 0===t?void 0:t.filter((function(e){return!e.isRented})),a=c.length;return Object(O.jsxs)("section",{children:[Object(O.jsxs)("h2",{className:"rental-section-title",children:["Available bicycles (",a,")"]}),Object(O.jsx)("ul",{className:"available-list",children:c.map((function(e){var t=e._id,c=e.bikeName,a=e.bikeType,i=e.rentPrice;return Object(O.jsx)(D,{id:t,name:c,type:a,price:i,onRemove:n,onUpdate:r},t)}))})]})}var L=function(){var e=Object(r.useState)([]),t=Object(l.a)(e,2),n=t[0],c=t[1],a=Object(r.useState)([]),i=Object(l.a)(a,2);i[0],i[1],Object(r.useEffect)((function(){p().then((function(e){var t=e.payload;return c(t)}))}),[]);var s=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,f(t).then((function(e){var t=e.payload;return c(t)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),j=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,h(t).then((function(){c((function(e){return e.filter((function(e){return e._id!==t}))}))}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}(),d=function(){var e=Object(u.a)(o.a.mark((function e(t){return o.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,m(t).then((function(e){var t=e.payload;return c(t)}));case 2:case"end":return e.stop()}}),e)})));return function(t){return e.apply(this,arguments)}}();return Object(O.jsxs)("div",{className:"app-wrapper",children:[Object(O.jsxs)(v,{children:[Object(O.jsx)(M,{}),Object(O.jsx)(C,{onSubmit:s}),Object(O.jsx)(U,{}),Object(O.jsx)(H,{bikes:n,onUpdate:d}),Object(O.jsx)(I,{bikes:n,onRemove:j,onUpdate:d})]}),Object(O.jsx)(b.a,{})]})};i.a.render(Object(O.jsx)(c.a.StrictMode,{children:Object(O.jsx)(L,{})}),document.getElementById("root"))}},[[62,1,2]]]);
//# sourceMappingURL=main.a002f978.chunk.js.map